<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
       const teamHistory = [
    {
        name: "Messi",
        position: "Forward",
        nationality: "Argentina",
        seasons: {
            "2022-2023": { matches: 34, goals: 21, assists: 14, yellowCards: 3 },
            "2023-2024": { matches: 32, goals: 25, assists: 15, yellowCards: 2 },
            "2024-2025": { matches: 28, goals: 18, assists: 12, yellowCards: 1 }
        }
    },
    {
        name: "Ronaldo",
        position: "Forward",
        nationality: "Portugal",
        seasons: {
            "2022-2023": { matches: 38, goals: 28, assists: 8, yellowCards: 5 },
            "2023-2024": { matches: 35, goals: 25, assists: 10, yellowCards: 4 },
            "2024-2025": { matches: 30, goals: 22, assists: 9, yellowCards: 3 }
        }
    }
];

function generatePlayerSeasonReport(playerName, teamHistory){

    let player = teamHistory.find(t => t.name === playerName);

    if (!player){
        console.log(`Không tìm thấy cầu thủ ${playerName}`);
        return;
    }

    let totalMatches = 0;
    let totalGoals = 0;
    let totalAssists = 0;
    let totalYellowCards = 0;
    let bestSeason = null;

    for (const season in player.seasons) {

        const stats = player.seasons[season];

        totalMatches += stats.matches;
        totalGoals += stats.goals;
        totalAssists += stats.assists;
        totalYellowCards += stats.yellowCards;

        if (
            !bestSeason ||
            stats.goals > bestSeason.goals ||
            (stats.goals === bestSeason.goals &&
             stats.assists > bestSeason.assists)
        ) {
            bestSeason = {
                season: season,
                goals: stats.goals,
                assists: stats.assists
            };
        }
    }

    return {
        name: player.name,
        position: player.position,
        nationality: player.nationality,
        careerStats: {
            totalMatches,
            totalGoals,
            totalAssists,
            totalYellowCards,
            averageGoalsPerMatch: +(totalGoals / totalMatches).toFixed(2),
            averageAssistsPerMatch: +(totalAssists / totalMatches).toFixed(2),
            bestSeason
        }
    };
}

console.log(generatePlayerSeasonReport("Messi", teamHistory));
    </script>
</body>
</html>